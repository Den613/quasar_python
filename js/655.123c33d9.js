"use strict";(self["webpackChunksite"]=self["webpackChunksite"]||[]).push([[655],{8655:(e,t,o)=>{o.r(t),o.d(t,{default:()=>Qt});var a=o(3673);const l={key:0},r={key:1};function s(e,t,o,s,i,n){const d=(0,a.up)("authorization"),u=(0,a.up)("tables"),c=(0,a.up)("q-page");return(0,a.wg)(),(0,a.j4)(c,{style:{background:"rgb(47 46 46)"},class:"q-pa-lg"},{default:(0,a.w5)((()=>[n.user?((0,a.wg)(),(0,a.iD)("div",r,[(0,a.Wm)(u,{user:n.user},null,8,["user"])])):((0,a.wg)(),(0,a.iD)("div",l,[(0,a.Wm)(d)]))])),_:1})}const i={class:"q-pa-md q-gutter-sm"},n=(0,a._)("h4",null,"Вход",-1),d=(0,a._)("br",null,null,-1),u=(0,a._)("br",null,null,-1),c=(0,a._)("br",null,null,-1),p=(0,a._)("br",null,null,-1),m={class:"row justify-start"};function g(e,t,o,l,r,s){const g=(0,a.up)("q-icon"),_=(0,a.up)("q-input"),w=(0,a.up)("q-btn"),f=(0,a.up)("q-card-section"),h=(0,a.up)("q-card"),k=(0,a.up)("q-page");return(0,a.wg)(),(0,a.j4)(k,{class:"flex flex-center"},{default:(0,a.w5)((()=>[(0,a._)("div",i,[(0,a.Wm)(h,{class:"my-card color_icon color_text_label color_button",dark:"",style:{height:"450px",width:"100%"}},{default:(0,a.w5)((()=>[(0,a.Wm)(f,null,{default:(0,a.w5)((()=>[n,(0,a.Wm)(_,{outlined:"",type:"email",ref:"nameRef",label:"Имя",modelValue:e.email,"onUpdate:modelValue":t[0]||(t[0]=t=>e.email=t),rules:e.nameRules},{prepend:(0,a.w5)((()=>[(0,a.Wm)(g,{name:"fas fa-user-tie"})])),_:1},8,["modelValue","rules"]),d,(0,a.Wm)(_,{outlined:"",type:"password",ref:"passRef",label:"Пароль",modelValue:e.password,"onUpdate:modelValue":t[1]||(t[1]=t=>e.password=t),rules:e.passRules},{prepend:(0,a.w5)((()=>[(0,a.Wm)(g,{name:"fas fa-unlock-alt"})])),_:1},8,["modelValue","rules"]),u,(0,a.Wm)(w,{color:"primary",label:"войти",style:{width:"100%"},onClick:t[2]||(t[2]=t=>e.authorize_base(e.email,e.password))}),c,p,(0,a._)("div",m,[(0,a.Wm)(w,{icon:"fab fa-google",style:{width:"45%",background:"#343230 !important"},onClick:t[3]||(t[3]=t=>e.authorize_google())}),(0,a.Wm)(w,{icon:"fab fa-yandex",style:{width:"50%","margin-left":"10px",background:"#343230 !important"},onClick:t[4]||(t[4]=t=>e.authorize_yandex())})])])),_:1})])),_:1})])])),_:1})}var _=o(6417),w=o(1959);const f=(0,a.aZ)({name:"authorization",setup(){const e=(0,w.iH)(null),t=(0,w.iH)(null);return{email:(0,w.iH)(null),password:(0,w.iH)(null),nameRef:e,passRef:t,nameRules:[e=>e&&e.length>0||"Введите имя"],passRules:[e=>e&&e.length>0||"Введите пароль"],onSubmit(){e.value.validate(),t.value.validate()}}},methods:{authorize_google(){this.$store.dispatch("showcase/authorize_google"),localStorage.setItem("auth","google")},authorize_yandex(){this.$store.dispatch("showcase/authorize_yandex"),localStorage.setItem("auth","yandex")},authorize_base(e,t){if(e&&t){e=e.split("@")[0];var o={email:e,password:t};this.$store.dispatch("showcase/base_authorize",o)}else _.Z.create({type:"negative",color:"negative",timeout:1e3,message:"Введите имя и пароль!"});setTimeout((()=>{this.email=null,this.password=null;var e=localStorage.getItem("access_token");this.$store.dispatch("showcase/getTable",e)}),500)}}});var h=o(4260),k=o(4379),b=o(151),y=o(5589),v=o(4842),W=o(4554),D=o(2165),x=o(6115),q=o(7518),Z=o.n(q);const U=(0,h.Z)(f,[["render",g]]),V=U;Z()(f,"components",{QPage:k.Z,QCard:b.Z,QCardSection:y.Z,QInput:v.Z,QIcon:W.Z,QBtn:D.Z,QField:x.Z});var Q=o(2323);const C={key:0},z=(0,a._)("h4",null,"Admin",-1),j=[z],$={key:1},S=(0,a._)("div",{style:{"font-size":"40px"}},"User",-1),H={class:"row"},T=(0,a._)("h5",null,"группа:",-1),I={style:{"margin-left":"10px"}},P={style:{"font-weight":"bold"}},R={style:{"font-weight":"bold"}},F=(0,a._)("br",null,null,-1),M={key:0},Y={key:0},B={key:1,class:"row"},L={key:0},E={key:0},A={key:1,class:"flex row justify-start"},G={key:0},K={key:1},J={key:0},N={key:0},O={key:0},X={key:1},ee={key:0},te={key:1},oe={key:1},ae={key:0},le={key:1},re={key:1},se={key:0},ie={key:1},ne={class:"q-gutter-sm row"},de={key:0},ue=(0,a.Uk)(" Выполняется "),ce={key:1},pe=(0,a.Uk)(" Отменена "),me={key:2},ge=(0,a.Uk)(" Выполненно ");function _e(e,t,o,l,r,s){const i=(0,a.up)("q-chip"),n=(0,a.up)("q-btn"),d=(0,a.up)("q-card"),u=(0,a.up)("q-icon"),c=(0,a.up)("q-input"),p=(0,a.up)("q-td"),m=(0,a.up)("q-badge"),g=(0,a.up)("q-tooltip"),_=(0,a.up)("q-checkbox"),w=(0,a.up)("dev"),f=(0,a.up)("modDialog"),h=(0,a.up)("q-card-section"),k=(0,a.up)("q-dialog"),b=(0,a.up)("q-tr"),y=(0,a.up)("q-table"),v=(0,a.up)("addvalue"),W=(0,a.up)("q-page");return(0,a.wg)(),(0,a.j4)(W,{class:"q-pa-lg"},{default:(0,a.w5)((()=>[(0,a._)("div",null,[(0,a.Wm)(d,{class:"q-pa-md",dark:"",style:{color:"#ff9800"}},{default:(0,a.w5)((()=>["admin"===String(e.user.privilege)?((0,a.wg)(),(0,a.iD)("div",C,j)):((0,a.wg)(),(0,a.iD)("div",$,[S,(0,a._)("div",H,[T,(0,a._)("div",I,[(0,a._)("h5",null,[(0,a.Wm)(i,{outline:"",square:"",color:"deep-orange","text-color":"white"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,Q.zw)(e.user.group.name),1)])),_:1})])])])])),(0,a._)("p",P,"name : "+(0,Q.zw)(e.user.full_name),1),(0,a._)("p",R,"email : "+(0,Q.zw)(e.user.email),1),(0,a.Wm)(n,{style:{background:"#4caf50 !important",color:"white","min-width":"300px"},label:"exit",onClick:t[0]||(t[0]=t=>e.exit_a())})])),_:1}),F,(0,a.Wm)(y,{dark:"",class:"sticky-header",title:"",columns:e.columns,rows:e.rows,"row-key":"name","virtual-scroll-sticky-size-start":48,"rows-per-page-options":[0],"virtual-scroll":"",modelValue:e.pagination,"onUpdate:modelValue":t[3]||(t[3]=t=>e.pagination=t),filter:e.filter},{"top-left":(0,a.w5)((()=>[(0,a.Wm)(c,{borderless:"",dense:"",class:"color_text",debounce:"300",modelValue:e.filter,"onUpdate:modelValue":t[1]||(t[1]=t=>e.filter=t),placeholder:"Search"},{append:(0,a.w5)((()=>[(0,a.Wm)(u,{style:{color:"#03a9f4"},name:"search"})])),_:1},8,["modelValue"])])),body:(0,a.w5)((o=>[(0,a.Wm)(b,{props:o},{default:(0,a.w5)((()=>[(0,a.Wm)(p,{key:"job",props:o,onClick:t=>(e.click_text(o.row),e.fixed=!0)},{default:(0,a.w5)((()=>[o.row.job?((0,a.wg)(),(0,a.iD)("div",M,[o.row.job.length<30?((0,a.wg)(),(0,a.iD)("div",Y,(0,Q.zw)(o.row.job),1)):((0,a.wg)(),(0,a.iD)("div",B,(0,Q.zw)(e.show_more(o.row.job)),1))])):(0,a.kq)("",!0)])),_:2},1032,["props","onClick"]),(0,a.Wm)(p,{key:"create",props:o,onClick:t=>(e.click_text(o.row),e.fixed=!0)},{default:(0,a.w5)((()=>[o.row.create?((0,a.wg)(),(0,a.iD)("div",L,[o.row.create.length<30?((0,a.wg)(),(0,a.iD)("div",E,(0,Q.zw)(o.row.create),1)):((0,a.wg)(),(0,a.iD)("div",A,(0,Q.zw)(e.show_more(o.row.create)),1))])):(0,a.kq)("",!0)])),_:2},1032,["props","onClick"]),(0,a.Wm)(p,{key:"date_month_year",props:o,onClick:t=>(e.click_text(o.row),e.fixed=!0)},{default:(0,a.w5)((()=>[(0,a.Uk)((0,Q.zw)(o.row.date_month_year),1)])),_:2},1032,["props","onClick"]),(0,a.Wm)(p,{key:"user_create",props:o,onClick:t=>(e.click_text(o.row),e.fixed=!0)},{default:(0,a.w5)((()=>["admin"===String(e.user.privilege)?((0,a.wg)(),(0,a.iD)("div",G,[(0,a.Wm)(m,{color:"purple"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,Q.zw)(o.row.user_create),1)])),_:2},1024)])):((0,a.wg)(),(0,a.iD)("div",K,[(0,a.Wm)(m,{style:{"background-color":"#009688"}},{default:(0,a.w5)((()=>[(0,a.Uk)((0,Q.zw)(o.row.user_create),1)])),_:2},1024)]))])),_:2},1032,["props","onClick"]),(0,a.Wm)(p,{key:"curent_date",props:o,onClick:t=>(e.click_text(o.row),e.fixed=!0)},{default:(0,a.w5)((()=>[(0,a.Uk)((0,Q.zw)(o.row.curent_date),1)])),_:2},1032,["props","onClick"]),(0,a.Wm)(p,{key:"group",props:o},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.groups_choose(o.row.group),(t=>((0,a.wg)(),(0,a.iD)("div",{key:t},[e.user.group?((0,a.wg)(),(0,a.iD)("div",J,[t===e.user.group.name?((0,a.wg)(),(0,a.iD)("div",N,[e.get_input_group(t,o.row.confirm)?((0,a.wg)(),(0,a.iD)("div",O,[(0,a.Wm)(i,{style:{background:"#21d428 !important",color:"white"}},{default:(0,a.w5)((()=>[(0,a.Uk)((0,Q.zw)(t),1)])),_:2},1024)])):((0,a.wg)(),(0,a.iD)("div",X,["admin_user"===e.user.privilege?((0,a.wg)(),(0,a.iD)("div",ee,[(0,a.Wm)(i,{clickable:"",onClick:a=>e.confirm_group(t,o.row,e.user),color:"deep-orange","text-color":"white"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,Q.zw)(t),1)])),_:2},1032,["onClick"])])):((0,a.wg)(),(0,a.iD)("div",te,[(0,a.Wm)(i,{color:"red","text-color":"white"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,Q.zw)(t),1)])),_:2},1024)]))]))])):((0,a.wg)(),(0,a.iD)("div",oe,[e.get_input_group(t,o.row.confirm)?((0,a.wg)(),(0,a.iD)("div",ae,[(0,a.Wm)(i,{outline:"",color:"green"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,Q.zw)(t),1)])),_:2},1024)])):((0,a.wg)(),(0,a.iD)("div",le,[(0,a.Wm)(i,{outline:"",color:"primary",style:{color:"white"}},{default:(0,a.w5)((()=>[(0,a.Uk)((0,Q.zw)(t),1)])),_:2},1024)]))]))])):((0,a.wg)(),(0,a.iD)("div",re,[e.get_input_group(t,o.row.confirm)?((0,a.wg)(),(0,a.iD)("div",se,[(0,a.Wm)(i,{outline:"",color:"green"},{default:(0,a.w5)((()=>[(0,a.Wm)(g,{anchor:"top middle",offset:[50,50],class:"bg-purple text-body2","transition-hide":"scale","transition-show":"scale"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,Q.zw)(e.get_responsible(t,o.row.responsible)),1)])),_:2},1024),(0,a.Uk)(" "+(0,Q.zw)(t),1)])),_:2},1024)])):((0,a.wg)(),(0,a.iD)("div",ie,[(0,a.Wm)(i,{outline:"",color:"primary",style:{color:"white"}},{default:(0,a.w5)((()=>[(0,a.Uk)((0,Q.zw)(t),1)])),_:2},1024)]))]))])))),128))])),_:2},1032,["props"]),(0,a.Wm)(p,{key:"status",props:o},{default:(0,a.w5)((()=>["admin"===e.user.privilege?((0,a.wg)(),(0,a.j4)(w,{key:0},{default:(0,a.w5)((()=>[(0,a._)("div",ne,[(0,a.Wm)(_,{dark:"",modelValue:o.row.status_perform,"onUpdate:modelValue":e=>o.row.status_perform=e,label:"Выполненно",style:{color:"#2196f3"},color:"green",onClick:t=>e.status_job(o.row,"perform")},null,8,["modelValue","onUpdate:modelValue","onClick"]),(0,a.Wm)(_,{dark:"",modelValue:o.row.status_cancel,"onUpdate:modelValue":e=>o.row.status_cancel=e,label:"Отменена",style:{color:"#2196f3"},color:"red",onClick:t=>e.status_job(o.row,"cancel")},null,8,["modelValue","onUpdate:modelValue","onClick"])])])),_:2},1024)):((0,a.wg)(),(0,a.j4)(w,{key:1},{default:(0,a.w5)((()=>[o.row.status_perform||o.row.status_cancel?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",de,[(0,a.Wm)(i,{outline:"",color:"primary","text-color":"white"},{default:(0,a.w5)((()=>[ue])),_:1})])),!o.row.status_perform&&o.row.status_cancel?((0,a.wg)(),(0,a.iD)("div",ce,[(0,a.Wm)(i,{outline:"",color:"red","text-color":"white"},{default:(0,a.w5)((()=>[pe])),_:1})])):(0,a.kq)("",!0),o.row.status_perform&&!o.row.status_cancel?((0,a.wg)(),(0,a.iD)("div",me,[(0,a.Wm)(i,{outline:"",color:"teal","text-color":"white"},{default:(0,a.w5)((()=>[ge])),_:1})])):(0,a.kq)("",!0)])),_:2},1024))])),_:2},1032,["props"]),(0,a.Wm)(k,{persistent:"","full-width":"",class:"q_bg_color_dialog",modelValue:e.fixed,"onUpdate:modelValue":t[2]||(t[2]=t=>e.fixed=t)},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{style:{background:"#292828"}},{default:(0,a.w5)((()=>[(0,a.Wm)(h,{style:{"max-width":"100%"},class:"scroll"},{default:(0,a.w5)((()=>[(0,a.Wm)(f,{fixed:e.fixed,data_text:e.data_text,user:e.user},null,8,["fixed","data_text","user"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:2},1032,["props"])])),_:1},8,["columns","rows","modelValue","filter"]),"admin"===e.user.privilege?((0,a.wg)(),(0,a.j4)(v,{key:0})):(0,a.kq)("",!0)])])),_:1})}o(5363);const we=(0,a._)("div",{class:"text-h6"},"Работа",-1),fe={key:0},he={key:1},ke=(0,a._)("br",null,null,-1),be=(0,a._)("br",null,null,-1),ye=(0,a._)("div",{class:"text-h6"},"Создано",-1),ve={key:0},We={key:1},De=(0,a._)("br",null,null,-1),xe=(0,a._)("div",{class:"text-h6"},"Дата",-1),qe={key:0},Ze={key:1},Ue={class:"row"},Ve=(0,a._)("br",null,null,-1),Qe=(0,a.Uk)(" Создано: "),Ce=(0,a._)("br",null,null,-1),ze=(0,a._)("div",{class:"text-h6"},"Группы",-1),je={key:0},$e={key:0},Se={key:0},He={key:1},Te={key:0},Ie={key:1},Pe={key:1},Re={key:0},Fe={key:1},Me={key:1},Ye={key:0},Be={key:1},Le={key:0},Ee=(0,a._)("br",null,null,-1),Ae={class:"row"};function Ge(e,t,o,l,r,s){const i=(0,a.up)("q-card-section"),n=(0,a.up)("q-separator"),d=(0,a.up)("q-editor"),u=(0,a.up)("q-card"),c=(0,a.up)("q-date"),p=(0,a.up)("q-badge"),m=(0,a.up)("q-chip"),g=(0,a.up)("q-tooltip"),_=(0,a.up)("q-select"),w=(0,a.up)("q-btn"),f=(0,a.up)("q-page"),h=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.j4)(f,{class:"q-pa-lg",style:{"min-width":"350px"}},{default:(0,a.w5)((()=>[(0,a.Uk)((0,Q.zw)(e.get_data(e.data_text))+" ",1),(0,a._)("div",null,[(0,a.Wm)(u,{dark:""},{default:(0,a.w5)((()=>[(0,a.Wm)(i,null,{default:(0,a.w5)((()=>[we])),_:1}),(0,a.Wm)(n),"admin"===e.user.privilege?((0,a.wg)(),(0,a.iD)("div",fe,[(0,a.Wm)(i,null,{default:(0,a.w5)((()=>[(0,a.Wm)(d,{modelValue:e.data.job,"onUpdate:modelValue":t[0]||(t[0]=t=>e.data.job=t),style:{"background-color":"#292828fa"},class:"q_edit_bg_color",definitions:{upload:{tip:"Upload to cloud",icon:"cloud_upload",label:"загрузить фото",handler:e.insertImg}},toolbar:[["bold","italic","strike","underline"],["upload"]]},null,8,["modelValue","definitions"])])),_:1})])):((0,a.wg)(),(0,a.iD)("div",he,[(0,a.Wm)(i,null,{default:(0,a.w5)((()=>[(0,a.Wm)(u,null,{default:(0,a.w5)((()=>[(0,a.Wm)(i,{style:{color:"black",background:"white"},innerHTML:e.data.job},null,8,["innerHTML"])])),_:1}),ke])),_:1})]))])),_:1}),be,(0,a.Wm)(u,{dark:"",class:"my-card"},{default:(0,a.w5)((()=>[(0,a.Wm)(i,null,{default:(0,a.w5)((()=>[ye])),_:1}),(0,a.Wm)(n),"admin"===e.user.privilege?((0,a.wg)(),(0,a.iD)("div",ve,[(0,a.Wm)(i,null,{default:(0,a.w5)((()=>[(0,a.Wm)(d,{modelValue:e.data.create,"onUpdate:modelValue":t[1]||(t[1]=t=>e.data.create=t),style:{"background-color":"#292828fa"},class:"q_edit_bg_color",definitions:{upload:{tip:"Upload to cloud",icon:"cloud_upload",label:"загрузить фото",handler:e.insertImg}},toolbar:[["bold","italic","strike","underline"],["upload"]]},null,8,["modelValue","definitions"])])),_:1})])):((0,a.wg)(),(0,a.iD)("div",We,[(0,a.Wm)(i,{innerHTML:e.data.create},null,8,["innerHTML"])]))])),_:1})]),De,(0,a.Wm)(u,{dark:"",class:"my-card"},{default:(0,a.w5)((()=>[(0,a.Wm)(i,null,{default:(0,a.w5)((()=>[xe])),_:1}),(0,a.Wm)(n),(0,a.Wm)(i,null,{default:(0,a.w5)((()=>["admin"===e.user.privilege?((0,a.wg)(),(0,a.iD)("div",qe,[(0,a.Wm)(c,{dark:"","first-day-of-week":"1",modelValue:e.data.date_month_year,"onUpdate:modelValue":t[2]||(t[2]=t=>e.data.date_month_year=t),mask:"DD-MM-YYYY",class:"header_cald"},null,8,["modelValue"])])):((0,a.wg)(),(0,a.iD)("div",Ze,[(0,a._)("p",Ue,(0,Q.zw)(e.data.date_month_year),1)])),Ve,Qe,(0,a.Wm)(p,{style:{"background-color":"#009688"}},{default:(0,a.w5)((()=>[(0,a.Uk)((0,Q.zw)(e.data.user_create),1)])),_:1})])),_:1})])),_:1}),Ce,(0,a.Wm)(u,{dark:"",class:"my-card"},{default:(0,a.w5)((()=>[(0,a.Wm)(i,null,{default:(0,a.w5)((()=>[ze])),_:1}),(0,a.Wm)(n),(0,a.Wm)(i,{class:"row"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.groups,(t=>((0,a.wg)(),(0,a.iD)("div",{key:t},[e.user.group?((0,a.wg)(),(0,a.iD)("div",je,[t===e.user.group.name?((0,a.wg)(),(0,a.iD)("div",$e,[e.groups_active(t,e.data)?((0,a.wg)(),(0,a.iD)("div",Se,[(0,a.Wm)(m,{style:{background:"#21d428 !important",color:"white"}},{default:(0,a.w5)((()=>[(0,a.Uk)((0,Q.zw)(t),1)])),_:2},1024)])):((0,a.wg)(),(0,a.iD)("div",He,["admin_user"===e.user.privilege?((0,a.wg)(),(0,a.iD)("div",Te,[(0,a.Wm)(m,{clickable:"",onClick:o=>e.confirm_group(t,e.data,e.user),color:"deep-orange","text-color":"white"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,Q.zw)(t),1)])),_:2},1032,["onClick"])])):((0,a.wg)(),(0,a.iD)("div",Ie,[(0,a.Wm)(m,{color:"red","text-color":"white"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,Q.zw)(t),1)])),_:2},1024)]))]))])):((0,a.wg)(),(0,a.iD)("div",Pe,[e.groups_active(t,e.data)?((0,a.wg)(),(0,a.iD)("div",Re,[(0,a.Wm)(m,{outline:"",color:"green",style:{color:"white"}},{default:(0,a.w5)((()=>[(0,a.Uk)((0,Q.zw)(t),1)])),_:2},1024)])):((0,a.wg)(),(0,a.iD)("div",Fe,[(0,a.Wm)(m,{outline:"",color:"primary",style:{color:"white"}},{default:(0,a.w5)((()=>[(0,a.Uk)((0,Q.zw)(t),1)])),_:2},1024)]))]))])):((0,a.wg)(),(0,a.iD)("div",Me,[e.groups_active(t,e.data)?((0,a.wg)(),(0,a.iD)("div",Ye,[(0,a.Wm)(m,{outline:"",color:"green",style:{color:"white"}},{default:(0,a.w5)((()=>[(0,a.Wm)(g,{anchor:"top middle",offset:[50,50],class:"bg-purple text-body2","transition-show":"scale","transition-hide":"scale"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,Q.zw)(e.get_responsible(t,e.data.responsible)),1)])),_:2},1024),(0,a.Uk)(" "+(0,Q.zw)(t),1)])),_:2},1024)])):((0,a.wg)(),(0,a.iD)("div",Be,[(0,a.Wm)(m,{outline:"",color:"primary",style:{color:"white"}},{default:(0,a.w5)((()=>[(0,a.Uk)((0,Q.zw)(t),1)])),_:2},1024)]))]))])))),128))])),_:1}),(0,a.Wm)(i,null,{default:(0,a.w5)((()=>["admin"===e.user.privilege?((0,a.wg)(),(0,a.iD)("div",Le,[(0,a.Wm)(_,{class:"select_color_bg",filled:"",modelValue:e.groups,"onUpdate:modelValue":t[3]||(t[3]=t=>e.groups=t),"use-input":"","use-chips":"",multiple:"","input-debounce":"0",options:e.list_all_groups(),style:{width:"40%"}},null,8,["modelValue","options"])])):(0,a.kq)("",!0)])),_:1})])),_:1}),Ee,(0,a._)("div",Ae,[(0,a.wy)((0,a.Wm)(w,{flat:"",label:"ok",color:"primary"},null,512),[[h]]),"admin"===e.user.privilege?((0,a.wg)(),(0,a.j4)(w,{key:0,flat:"",label:"edit",color:"primary",onClick:t[4]||(t[4]=t=>e.edit_value(t,e.data,e.groups))})):(0,a.kq)("",!0)])])),_:1})}const Ke=(0,a.aZ)({name:"modDialog",setup(){var e=(0,w.iH)("null"),t=(0,w.iH)("null");return{data:e,groups:t}},methods:{insertImg(){const e=document.createElement("input");let t;e.type="file",e.accept=".png, .jpg, .svg",e.onchange=o=>{const a=Array.from(e.files);t=a[0];const l=new FileReader;let r="";l.onloadend=function(){r=l.result,document.execCommand("insertHTML",!0,'<div><img src="'+r+'" width=400 hight=400/></div>')},l.readAsDataURL(t)},e.click()},get_data(e){this.data=e,this.groups=this.groups_choose(e.group)},groups_choose(e){if(e)var t=/\s*,\s*/,o=e.split(t);return o},groups_active(e,t){return!!t.confirm&&t.confirm.includes(e)},confirm_group(e,t,o){console.log(o.full_name+":"+e);var a={id:t.id,responsible:o.full_name+":"+e,confirm:e,access_token:localStorage.getItem("access_token")};t.confirm?t.confirm.includes(e)||t.confirm.push(e):t.confirm=e,console.log("data user: ",a),console.log("row : ",t.confirm);var l=[];if("object"===typeof t.confirm){for(var r="",s=0;s<t.confirm.length;s++)r+=t.confirm[s]+",";r=r.substring(0,r.length-1),l=this.groups_choose(r)}else l.push(t.confirm);t.confirm=l,this.$store.dispatch("showcase/addTableConfirm",a)},list_all_groups(){for(var e=this.$store.state.showcase.groups,t=[],o=0;o<e.length;o++)t.push(e[o].name);return t},convert_array_in_str(e){for(var t="",o=0;o<e.length;o++)t=t+e[o]+",";return t=t.substring(0,t.length-1),t},edit_value(e,t,o){var a=[],l=[];for(name in console.log("evt: ",e),o)a.push(o[name]);if("string"===typeof t.confirm){var r=this.groups_choose(t.confirm);if(r)for(var s=0;s<r.length;s++)a.includes(r[s])&&l.push(r[s]);else a.includes(t.confirm)&&l.push(t.confirm)}else for(name in t.confirm)a.includes(t.confirm[name])&&l.push(t.confirm[name]);var i={id:String(t.id),job:t.job,create:t.create,data:t.date_month_year,groups:a,confirm:l,token:localStorage.getItem("access_token")};t.group=1===a.length?a[0]:this.convert_array_in_str(a),t.confirm=1===l.length?l[0]:this.convert_array_in_str(l),this.$store.dispatch("showcase/editData",i)},get_responsible(e,t){var o=this.groups_choose(t);if(o)for(var a=0;a<o.length;a++){var l=/\s*:\s*/,r=o[a].split(l),s=r[0],i=r[1];if(i===e)return s}}},props:{fixed:{type:Boolean},data_text:{type:String},user:{type:String}}});var Je=o(5869),Ne=o(154),Oe=o(5836),Xe=o(9721),et=o(7030),tt=o(8870),ot=o(5666),at=o(677);const lt=(0,h.Z)(Ke,[["render",Ge]]),rt=lt;Z()(Ke,"components",{QPage:k.Z,QCard:b.Z,QCardSection:y.Z,QSeparator:Je.Z,QEditor:Ne.Z,QDate:Oe.Z,QBadge:Xe.Z,QChip:et.Z,QTooltip:tt.Z,QSelect:ot.Z,QBtn:D.Z}),Z()(Ke,"directives",{ClosePopup:at.Z});const st=["disable"],it={class:"q-pa-md"},nt=(0,a._)("p",{style:{color:"#2196f3"}},"Выберите группы",-1),dt={key:0},ut={key:1};function ct(e,t,o,l,r,s){const i=(0,a.up)("q-btn"),n=(0,a.up)("q-page-sticky"),d=(0,a.up)("q-editor"),u=(0,a.up)("q-step"),c=(0,a.up)("q-date"),p=(0,a.up)("q-select"),m=(0,a.up)("q-stepper-navigation"),g=(0,a.up)("q-stepper"),_=(0,a.up)("q-dialog"),w=(0,a.up)("q-page"),f=(0,a.Q2)("touch-pan");return(0,a.wg)(),(0,a.j4)(w,null,{default:(0,a.w5)((()=>[(0,a.Wm)(n,{offset:e.fabPos},{default:(0,a.w5)((()=>[(0,a.wy)(((0,a.wg)(),(0,a.iD)("div",{direction:"up",disable:e.draggingFab},[(0,a.Wm)(i,{round:"",icon:"add",id:"add_btn",onClick:t[0]||(t[0]=t=>e.addPopup=!0),style:{position:"absolute",bottom:"50px",right:"50px",background:"#9C27B0 !important",color:"white"}})],8,st)),[[f,e.moveFab,void 0,{prevent:!0,mouse:!0}]])])),_:1},8,["offset"]),(0,a.Wm)(_,{target:"#add_btn",modelValue:e.addPopup,"onUpdate:modelValue":t[9]||(t[9]=t=>e.addPopup=t)},{default:(0,a.w5)((()=>[(0,a._)("div",it,[(0,a.Wm)(g,{modelValue:e.step,"onUpdate:modelValue":t[8]||(t[8]=t=>e.step=t),ref:"stepper",dark:"",class:"bg-grey-10","active-color":"deep-orange","done-color":"secondary",animated:""},{navigation:(0,a.w5)((()=>[(0,a.Wm)(m,null,{default:(0,a.w5)((()=>[e.step<4?((0,a.wg)(),(0,a.iD)("div",dt,[(0,a.Wm)(i,{onClick:t[5]||(t[5]=t=>e.$refs.stepper.next()),color:"deep-orange",label:"далее"}),e.step>1?((0,a.wg)(),(0,a.j4)(i,{key:0,flat:"",color:"deep-orange",onClick:t[6]||(t[6]=t=>e.$refs.stepper.previous()),label:"назад",class:"q-ml-sm"})):(0,a.kq)("",!0)])):((0,a.wg)(),(0,a.iD)("div",ut,[(0,a.Wm)(i,{disable:!e.group||!e.date_month_year,onClick:e.add_n,color:"deep-orange",label:"добавить"},null,8,["disable","onClick"]),e.step>1?((0,a.wg)(),(0,a.j4)(i,{key:0,flat:"",color:"deep-orange",onClick:t[7]||(t[7]=t=>e.$refs.stepper.previous()),label:"назад",class:"q-ml-sm"})):(0,a.kq)("",!0)]))])),_:1})])),default:(0,a.w5)((()=>[(0,a.Wm)(u,{name:1,title:"Работа",icon:"settings",done:e.step>1},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{modelValue:e.job,"onUpdate:modelValue":t[1]||(t[1]=t=>e.job=t),style:{"background-color":"#292828fa"},class:"q_edit_bg_color",definitions:{upload:{tip:"Upload to cloud",icon:"cloud_upload",label:"загрузить фото",handler:e.insertImg}},toolbar:[["bold","italic","strike","underline"],["upload"]]},null,8,["modelValue","definitions"])])),_:1},8,["done"]),(0,a.Wm)(u,{name:2,title:"Создано",icon:"fas fa-tools",done:e.step>2},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{modelValue:e.create,"onUpdate:modelValue":t[2]||(t[2]=t=>e.create=t),style:{"background-color":"#292828fa"},class:"q_edit_bg_color",definitions:{upload:{tip:"Upload to cloud",icon:"cloud_upload",label:"загрузить фото",handler:e.insertImg}},toolbar:[["bold","italic","strike","underline"],["upload"]]},null,8,["modelValue","definitions"])])),_:1},8,["done"]),(0,a.Wm)(u,{name:3,title:"Дата",icon:"far fa-calendar-alt",done:e.step>3},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{dark:"","first-day-of-week":"1",modelValue:e.date_month_year,"onUpdate:modelValue":t[3]||(t[3]=t=>e.date_month_year=t),mask:"DD-MM-YYYY",class:"header_cald"},null,8,["modelValue"])])),_:1},8,["done"]),(0,a.Wm)(u,{name:4,title:"Группы",icon:"fas fa-users"},{default:(0,a.w5)((()=>[nt,(0,a.Wm)(p,{class:"select_color_bg",filled:"",modelValue:e.group,"onUpdate:modelValue":t[4]||(t[4]=t=>e.group=t),"use-input":"","use-chips":"",multiple:"","input-debounce":"0",options:e.list_groups(),style:{width:"250px"}},null,8,["modelValue","options"])])),_:1})])),_:1},8,["modelValue"])])])),_:1},8,["modelValue"])])),_:1})}const pt=(0,a.aZ)({name:"addvalue",setup(){var e=(0,w.iH)(!1);const t=(0,w.iH)([18,18]),o=(0,w.iH)(!1);var a=(0,w.iH)(1),l=(0,w.iH)(null),r=(0,w.iH)(null),s=(0,w.iH)(null),i=(0,w.iH)(null),n=(0,w.iH)(null);return{addPopup:e,fabPos:t,draggingFab:o,moveFab(e){o.value=!0!==e.isFirst&&!0!==e.isFirst,t.value=[t.value[0]-e.delta.x,t.value[1]-e.delta.y]},step:a,job:l,create:r,date_month_year:s,user_create:i,group:n}},methods:{insertImg(){const e=document.createElement("input");let t;e.type="file",e.accept=".png, .jpg, .svg",e.onchange=o=>{const a=Array.from(e.files);t=a[0];const l=new FileReader;let r="";l.onloadend=function(){r=l.result,document.execCommand("insertHTML",!0,'<div><img src="'+r+'" width=400 hight=400/></div>')},l.readAsDataURL(t)},e.click()},list_groups(){var e=this.$store.state.showcase.groups,t=[];console.log("groups: ",e);for(var o=0;o<e.length;o++)t.push(e[o].name);return console.log("list: ",e),t},add_n:function(){console.log("run...");var e=new Date,t=String(e.getDate()).padStart(2,"0"),o=String(e.getMonth()+1).padStart(2,"0"),a=e.getFullYear(),l={user_create:this.$store.state.showcase.user_data.full_name,email:this.$store.state.showcase.user_data.email,job:this.job,create:this.create,date_month_year:this.date_month_year,access_token:localStorage.getItem("access_token"),curent_date:o+"-"+t+"-"+a,group:this.group};console.log(l),this.$store.dispatch("showcase/addTable",l),setTimeout((()=>{this.$store.dispatch("showcase/getTable",localStorage.getItem("access_token"))}),200),this.job="",this.create="",this.date_month_year="",this.addPopup=!1,this.step=1}}});var mt=o(1007),gt=o(5926),_t=o(3518),wt=o(4340),ft=o(6877),ht=o(5777);const kt=(0,h.Z)(pt,[["render",ct]]),bt=kt;Z()(pt,"components",{QPage:k.Z,QPageSticky:mt.Z,QBtn:D.Z,QDialog:gt.Z,QStepper:_t.Z,QStep:wt.Z,QEditor:Ne.Z,QDate:Oe.Z,QSelect:ot.Z,QStepperNavigation:ft.Z}),Z()(pt,"directives",{TouchPan:ht.Z});const yt=(0,a.aZ)({components:{modDialog:rt,addvalue:bt},name:"tables",setup(){var e=(0,w.iH)(!1),t=(0,w.iH)(null),o=(0,w.iH)("");return{filter:o,data_text:t,fixed:e,pagination:{sortBy:"last_name",descending:!1,rowsPerPage:0}}},methods:{get_responsible(e,t){var o=this.groups_choose(t);if(o)for(var a=0;a<o.length;a++){var l=/\s*:\s*/,r=o[a].split(l),s=r[0],i=r[1];if(i===e)return s}},status_job(e,t){var o={},a=!1,l=!1,r="";a=!!e.status_perform,l=!!e.status_cancel,r=localStorage.getItem("access_token"),a&&"perform"===t&&(l=!1),l&&"cancel"===t&&(a=!1),o={id:String(e.id),status_perform:a,status_cancel:l,token:r},this.$store.dispatch("showcase/statusJob",o),setTimeout((()=>{this.$store.dispatch("showcase/getTable",localStorage.getItem("access_token"))}),200)},get_input_group(e,t){if("string"===typeof t&&(t=this.groups_choose(t)),!t)return!1;for(var o=0;o<t.length;o++)if(e===t[o])return!0},confirm_group(e,t,o){var a={id:t.id,responsible:o.full_name+":"+e,confirm:e,access_token:localStorage.getItem("access_token")};this.$store.dispatch("showcase/addTableConfirm",a),setTimeout((()=>{this.$store.dispatch("showcase/getTable",localStorage.getItem("access_token"))}),200)},groups_choose(e){if(e)var t=/\s*,\s*/,o=e.split(t);return o},click_text(e){this.data_text=e},show_more(e){if(e){for(var t="",o=0;o<e.length;o++)o<30&&(t+=e[o]);return t+" ..."}},exit_a(){location.reload(),localStorage.clear(),document.cookie.split(";").forEach((function(e){document.cookie=e.replace(/^ +/,"").replace(/=.*/,"=;expires="+(new Date).toUTCString()+";path=/")}))}},computed:{columns(){return[{name:"job",align:"left",label:"работа",field:"job",sortable:!0},{name:"create",align:"left",label:"создано",field:"create",sortable:!0},{name:"date_month_year",align:"left",label:"дата",field:"date_month_year",sortable:!0},{name:"user_create",align:"left",label:"кем создано",field:"user_create",sortable:!0},{name:"curent_date",align:"left",label:"дата создания",field:"curent_date",sortable:!0},{name:"group",align:"left",label:"группы",field:"group"},{name:"status",align:"left",label:"статус",field:"status",style:"width: 25%"}]},rows:{get(){if(this.$store.state.showcase.table){for(var e=Object.keys(this.$store.state.showcase.table),t=[],o=0;o<e.length;o++)t.push({id:this.$store.state.showcase.table[e[o]].id,job:this.$store.state.showcase.table[e[o]].job,create:this.$store.state.showcase.table[e[o]].create,date_month_year:this.$store.state.showcase.table[e[o]].date_mounth_year,user_create:this.$store.state.showcase.table[e[o]].user_create,curent_date:this.$store.state.showcase.table[e[o]].curent_date,group:this.$store.state.showcase.table[e[o]].group,confirm:this.groups_choose(this.$store.state.showcase.table[e[o]].confirm),status_perform:this.$store.state.showcase.table[e[o]].status_perform,status_cancel:this.$store.state.showcase.table[e[o]].status_cancel,status:null,responsible:this.$store.state.showcase.table[e[o]].responsible});return t}return[{job:null,create:null,date_month_year:null,user_create:null}]}}},mounted(){var e=localStorage.getItem("access_token");this.$store.dispatch("showcase/getTable",e),this.$store.dispatch("showcase/getGroup",e)},props:{user:{type:String}}});var vt=o(3503),Wt=o(8186),Dt=o(3884),xt=o(1420);const qt=(0,h.Z)(yt,[["render",_e]]),Zt=qt;Z()(yt,"components",{QPage:k.Z,QCard:b.Z,QChip:et.Z,QBtn:D.Z,QTable:vt.Z,QInput:v.Z,QIcon:W.Z,QTr:Wt.Z,QTd:Dt.Z,QBadge:Xe.Z,QTooltip:tt.Z,QCheckbox:xt.Z,QDialog:gt.Z,QCardSection:y.Z,QField:x.Z,QDate:Oe.Z,QEditor:Ne.Z});const Ut={components:{authorization:V,tables:Zt},computed:{user:{get(){return this.$store.state.showcase.user_data||this.$store.dispatch("showcase/get_data_storage"),this.$store.state.showcase.user_data}}},mounted(){var e=localStorage.getItem("access_token");e&&(this.$store.dispatch("showcase/getGroup",e),this.$store.dispatch("showcase/getTable",e))}},Vt=(0,h.Z)(Ut,[["render",s]]),Qt=Vt;Z()(Ut,"components",{QPage:k.Z})}}]);